<overlayManagement:Overlay x:Class="RacingAidWpf.View.TimesheetOverlay"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:viewModel="clr-namespace:RacingAidWpf.ViewModel"
        xmlns:converters="clr-namespace:RacingAidWpf.Converters"
        xmlns:overlayManagement="clr-namespace:RacingAidWpf.OverlayManagement"
        mc:Ignorable="d"
        d:DataContext="{d:DesignInstance viewModel:TimesheetWindowViewModel}"
        Title="Timesheet"
        SizeToContent="WidthAndHeight"
        MaxWidth="800"
        MaxHeight="500"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        Topmost="True"
        AllowsTransparency="True">
    <overlayManagement:Overlay.Background>
        <SolidColorBrush Color="Transparent"/>
    </overlayManagement:Overlay.Background>
    <overlayManagement:Overlay.Resources>
        <converters:LapTimeConverter x:Key="LapTimeConverter"/>
    </overlayManagement:Overlay.Resources>
    
    <Grid x:Name="DriversGrid" MouseDown="DriversGrid_OnMouseDown">
        
        <Canvas Style="{StaticResource DefaultCanvasStyle}"/>
        <FrameworkElement x:Name="dummyElement" Visibility="Collapsed"/>
        
        <DataGrid ItemsSource="{Binding Timesheet}"
                  Style="{StaticResource DefaultDataGridStyle}"
                  ColumnHeaderStyle="{StaticResource DefaultDataGridColumnHeaderStyle}"
                  RowStyle="{StaticResource DefaultDataGridRowStyle}"
                  AutoGenerateColumns="False"
                  VerticalScrollBarVisibility="Hidden"
                  HorizontalScrollBarVisibility="Hidden">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Pos." Binding="{Binding PositionOverall}" Width="1*"/>
                <DataGridTextColumn Header="Name" Binding="{Binding FullName}" Width="4*"/>
                <DataGridTextColumn Header="No." Binding="{Binding CarNumber}" Width="1*" Visibility="{Binding DataContext.CarNumberColumnVisibility, Source={x:Reference dummyElement}}"/>
                <DataGridTextColumn Header="Safety" Binding="{Binding SafetyRating}" Width="1*" Visibility="{Binding DataContext.SafetyColumnVisibility, Source={x:Reference dummyElement}}"/>
                <DataGridTextColumn Header="Skill" Binding="{Binding SkillRating}" Width="1*" Visibility="{Binding DataContext.SkillColumnVisibility, Source={x:Reference dummyElement}}"/>
                <DataGridTextColumn Header="Last Lap" Binding="{Binding LastLapTimeMs, Converter={StaticResource LapTimeConverter}}" Width="2*" Visibility="{Binding DataContext.LastLapColumnVisibility, Source={x:Reference dummyElement}}"/>
                <DataGridTextColumn Header="Fastest Lap" Binding="{Binding FastestLapTimeMs, Converter={StaticResource LapTimeConverter}}" Width="2*" Visibility="{Binding DataContext.FastestLapColumnVisibility, Source={x:Reference dummyElement}}"/>
                <DataGridTextColumn Header="Leader" Binding="{Binding DeltaToLeaderMs}" Width="1*" Visibility="{Binding DataContext.GapToLeaderColumnVisibility, Source={x:Reference dummyElement}}"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</overlayManagement:Overlay>
